







## 193. 有效电话号码(easy)

[博客园](http://www.cnblogs.com/grandyang/p/5389375.html)

### 题目描述


给定一个包含电话号码列表（一行一个电话号码）的文本文件 file.txt，写一个 bash 脚本输出所有有效的电话号码。

你可以假设一个有效的电话号码必须满足以下两种格式： (xxx) xxx-xxxx 或 xxx-xxx-xxxx。（x 表示一个数字）

你也可以假设每行前后没有多余的空格字符。

示例:

	假设 file.txt 内容如下：
	
	987-123-4567
	123 456 7890
	(123) 456-7890
	你的脚本应当输出下列有效的电话号码：
	
	987-123-4567
	(123) 456-7890


### 思路

#### 1

这道题让我们验证数字串是否为正确的电话号码的格式，而且规定了正确的格式只有两种(xxx) xxx-xxxx or xxx-xxx-xxxx，那么我们可以看出来区别就是在前几个字符，而后八个字符都相同。
这题有多种解法，我们首先来看使用awk命令的解法，关于awk的介绍可以参见这个帖子。这道题是难点是如何写匹配的正则表达式，关于Bash脚本的正则表达式讲解请参见这个贴子。那么首先来看‘/.../'表示中间的是要匹配的正则表达式，然后脱字符^匹配一行的开头，美元符`$`在正则表达式中匹配行尾，然后再看中间的部分，[0-9]{3}表示匹配三个数字，圆括号括起一组正则表达式. 它和"|"操作符或在用expr进行子字符串提取(substring extraction)一起使用很有用。那么([0-9]{3}-|[0−9]3 )就可以理解了，它匹配了xxx-和(xxx) 这两种形式的字符串，然后后面的就好理解了，匹配xxx-xxxx这样的字符串，

#### 2

下面来看使用sed命令的解法，关于sed的讲解可以参见这个帖子。那么我们先来看后面的两个参数，-n表示关闭默认输出，默认将自动打印所有行，这样就不会打印出不符合要求的数字串了。-r表示支持扩展正则+ ? () {} |。后面的正则表达式和上面都相同，就是后面多了一个p，在用sed时，p和-n合用，表示打印某一行，这样才能把符合要求的行打印出来。


#### 3

再来看使用grep命令的做法，关于grep的讲解可以参见这个帖子。我没有查到那个-P参数的用法，有没有大神来点拨一下，后面的正则表达式思路根上面的相同，只不过用d{3}来表示[0-9]{3}，道理都一样，参见代码如下。


### 代码
```
# Read from the file file.txt and output the tenth line to stdout.

awk '{if(NR==10) print $0}' file.txt # 8ms

awk 'NR == 10' file.txt # 12ms

sed -n 10p file.txt # 8ms

tail -n +10 file.txt | head -n 1 # 8ms

head -n 10 file.txt | tail -n +10 # 12ms
```










## 195. 第十行(easy)

[博客园](http://www.cnblogs.com/grandyang/p/5376902.html)

### 题目描述


给定一个文本文件 file.txt，请只打印这个文件中的第十行。

示例:
	
	假设 file.txt 有如下内容：
	
	Line 1
	Line 2
	Line 3
	Line 4
	Line 5
	Line 6
	Line 7
	Line 8
	Line 9
	Line 10
	你的脚本应当显示第十行：
	
	Line 10
说明:
1. 如果文件少于十行，你应当输出什么？
2. 至少有三种不同的解法，请尝试尽可能多的方法来解题。


### 思路


#### 1


这道题让我们用Bash脚本来打印一个txt文件的第十行，可以用很多种方法来实现，我们先来看一种是用awk来实现的方法，awk是强大的文本分析工具，具有流控制、数学运算、进程控制、内置的变量和函数、循环和判断的功能，具体可以参见这个帖子。其中NR表示行数，`$0`表示当前记录，所以我们可以用if来判断行数为第十行时，将内容打印出来即可。


#### 

我们也可以用更简洁的写法来打印出第十行如下：


#### 3

我们也可以使用流编辑工具sed来做，关于sed的讲解可以参见这个帖子。-n默认表示打印所有行，p限定了具体打印的行数。


#### 4
我们也可以使用tail和head关键字来打印，关于tail和head的用法详解请参见这个帖子。其中head表示从头开始打印，tail表示从结尾开始打印，-你表示根据文件行数进行打印，一些区别与联系请见下列例子：

tail -n 3 file.txt: 打印file文件的最后三行内容　　　　　　

tail -n +3 file.txt： 从file文件第三行开始打印所有内容

head -n 3 file.txt： 打印file文件的前三行

head -n -3 file.txt： 打印file文件除了最后三行的所有内容

至于竖杠|为管道命令，讲解参见这个帖子，用法: command 1 | command 2 他的功能是把第一个命令command1执行的结果作为command 2的输入传给command 2。了解了这些知识，那么下面一行命令就很好理解了，首先输入file文件从第十行开始的所有内容，然后将输出内容的第一行打印出来即为第十行：


#### 5
下面这种方法跟上面刚好相反，先输出file文件的前十行，然后从输出的第十行开始打印，那么也能正好打印第十行的内容。






### 代码
```
# Read from the file file.txt and output all valid phone numbers to stdout.

awk '/^([0-9]{3}-|\([0-9]{3}\) )[0-9]{3}-[0-9]{4}$/' file.txt # 16ms
sed -n -r '/^([0-9]{3}-|\([0-9]{3}\) )[0-9]{3}-[0-9]{4}$/p' file.txt # 16ms
grep -P '^(\d{3}-|\(\d{3}\) )\d{3}-\d{4}$' file.txt  #20ms

```
